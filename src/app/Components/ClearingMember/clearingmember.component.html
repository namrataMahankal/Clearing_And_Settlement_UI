
<body class='mat-app-background' style="height:auto">



<mat-toolbar [class.mat-elevation-z6]=true color="primary">
  <img src="assets/logo_small.jpg" alt="logo" style="float: left;" >

  &nbsp;&nbsp;&nbsp;&nbsp;

    <span>Clearing Member</span>
  </mat-toolbar>
  <br>

 <style>
   
   table {
  width: 100%;
  align-content: center;
/*padding-left:90px*/
}

.toggle {
   float: right;
   padding-right: 200px;
}
.list1{
  padding-left: 160px;
}
 </style>

<mat-tab-group mat-align-tabs="center" id="contenttab"  style="height: 100vh" > 

  <mat-tab label="Profile" >
    <mat-list class="list1" role="list" >
      <br>
      <br>
      <mat-list-item role="listitem"><h2>Opening Fund Balance : ${{openingFundBalance | number:'1.0-2':'en-US'}}</h2></mat-list-item>
     </mat-list>
    <br>
    <mat-list class="list1" role="list" >
      <mat-list-item role="listitem"><h2>Shares:</h2></mat-list-item>
    </mat-list>
    <table mat-table [dataSource]="openingShares" class="mat-elevation-z8" style='padding-left: 150px;'>
        <ng-container matColumnDef="Securities">
          <th mat-header-cell *matHeaderCellDef> Securities </th>
          <td mat-cell *matCellDef="let element"> {{element.es}} </td>
        </ng-container>
      
        <!-- Name Column -->
        <ng-container matColumnDef="Shares">
          <th mat-header-cell *matHeaderCellDef> Shares </th>
          <td mat-cell *matCellDef="let element"> {{element.sharesBalance | number:'1.0-2':'en-US'}} </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumnsProfile"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumnsProfile;"></tr>
    </table>
  </mat-tab>
    
  <mat-tab label="Trades">  
    <br>
<!-- <div style="height: max-content;background-color: #424242;"> -->
    <div style="float:left; width:50%;"><h2 align="center">Buy Trades</h2></div>
    <div style="float:right; width:50%"><h2 align="center">Sell Trades</h2></div>
<!-- <section style="background:#424242;"> -->
  
    <div style="float:left; width:50%;">
  <table mat-table [dataSource]="buyTrades" >
      
        <!-- Weight Column -->
        <ng-container matColumnDef="ES">
          <th mat-header-cell *matHeaderCellDef> ES </th>
          <td mat-cell *matCellDef="let element"> {{element.es}} </td>
        </ng-container>
      
        <!-- Symbol Column -->
        <ng-container matColumnDef="Qty">
          <th mat-header-cell *matHeaderCellDef> Quantity </th>
          <td mat-cell *matCellDef="let element"> {{element.qty | number:'1.0-2':'en-US'}} </td>
        </ng-container>
  
        <ng-container matColumnDef="Price">
          <th mat-header-cell *matHeaderCellDef> Price </th>
          <td mat-cell *matCellDef="let element"> {{element.price | number:'1.0-2':'en-US'}} </td>
        </ng-container>
  
        <ng-container matColumnDef="TradeValue">
          <th mat-header-cell *matHeaderCellDef> Trade Value </th>
          <td mat-cell *matCellDef="let element"> {{element.transactionAmt | number:'1.0-2':'en-US'}} </td>
        </ng-container>
      
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
    </div>
    
    <div style="float:right; width:50%;">
      <table mat-table [dataSource]="sellTrades" >
      
        <!-- Weight Column -->
        <ng-container matColumnDef="ES">
          <th mat-header-cell *matHeaderCellDef> ES </th>
          <td mat-cell *matCellDef="let element"> {{element.es}} </td>
        </ng-container>
      
        <!-- Symbol Column -->
        <ng-container matColumnDef="Qty">
          <th mat-header-cell *matHeaderCellDef> Quantity </th>
          <td mat-cell *matCellDef="let element"> {{element.qty | number:'1.0-2':'en-US'}} </td>
        </ng-container>
  
        <ng-container matColumnDef="Price">
          <th mat-header-cell *matHeaderCellDef> Price </th>
          <td mat-cell *matCellDef="let element"> {{element.price | number:'1.0-2':'en-US'}} </td>
        </ng-container>
  
        <ng-container matColumnDef="TradeValue">
          <th mat-header-cell *matHeaderCellDef> Trade Value </th>
          <td mat-cell *matCellDef="let element"> {{element.transactionAmt | number:'1.0-2':'en-US'}} </td>
        </ng-container>
      
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
    </div>

  <!-- </div> -->
    </mat-tab>


    <mat-tab label="Corporate Actions"> 

      <table mat-table [dataSource]="corpActions" class="mat-elevation-z8">
        <ng-container matColumnDef="Securities">
          <th mat-header-cell *matHeaderCellDef> Securities</th>
          <td mat-cell *matCellDef="let element"> {{element.securityName}} </td>
        </ng-container>
      
        <!-- Name Column -->
        <ng-container matColumnDef="Actions">
          <th mat-header-cell *matHeaderCellDef> Actions </th>
          <td mat-cell *matCellDef="let element"> {{element.action}} </td>
        </ng-container>
      
        <ng-container matColumnDef="Parameter">
          <th mat-header-cell *matHeaderCellDef> Parameter </th>
          <td mat-cell *matCellDef="let element"> {{element.parameter}} </td>
        </ng-container>
      
      
        <!-- Symbol Column -->
        <ng-container matColumnDef="Initial share balance">
          <th mat-header-cell *matHeaderCellDef> Initial share balance </th>
          <td mat-cell *matCellDef="let element"> {{element.initialShareBalance | number:'1.0-2':'en-US'}} </td>
        </ng-container>

        <ng-container matColumnDef="Corp Action effect">
          <th mat-header-cell *matHeaderCellDef> Corp Action effect </th>
          <td mat-cell *matCellDef="let element"> {{element.initialShareBalance - element.finalShareBalance | number:'1.0-2':'en-US'}} </td>
        </ng-container>
  
  
        <ng-container matColumnDef="Current share balance">
          <th mat-header-cell *matHeaderCellDef> Current share balance </th>
          <td mat-cell *matCellDef="let element"> {{element.finalShareBalance | number:'1.0-2':'en-US'}} </td>
        </ng-container>
      
        <tr mat-header-row *matHeaderRowDef="displayedColumnsCorpActions"></tr>
        <tr mat-row *matRowDef="let row; columns:displayedColumnsCorpActions;"></tr>
      </table>

    </mat-tab>

    <mat-tab label="Obligation Report"> 
      <ng-template matTabLabel>
        <span matBadge={{obCnt}} matBadgeOverlap="false" [matBadgeHidden]="hiddenValue">Obligation Report</span>
    </ng-template>
      <mat-list class="list1" role="list" >
        
         <mat-list-item role="listitem"><h2>Funds</h2></mat-list-item>
         <mat-list-item role="listitem"><h3>Opening Balance: ${{openingFundBalance | number:'1.0-2':'en-US'}}</h3></mat-list-item>
         <mat-list-item role="listitem"><h3>Funds Obliged: ${{fundsObliged | number:'1.0-2':'en-US'}}</h3></mat-list-item>
         
      </mat-list>                                  
    <!-- <table mat-table [dataSource]="dataSourceFunds" class="mat-elevation-z8">
        
        <ng-container matColumnDef="Securities">
          <th mat-header-cell *matHeaderCellDef> Securities</th>
          <td mat-cell *matCellDef="let element"> {{element.Securities}} </td>
        </ng-container>
        <ng-container matColumnDef="Shares">
          <th mat-header-cell *matHeaderCellDef> Shares</th>
          <td mat-cell *matCellDef="let element"> {{element.Shares}} </td>
        </ng-container>

        <ng-container matColumnDef="Price">
          <th mat-header-cell *matHeaderCellDef> Price</th>
          <td mat-cell *matCellDef="let element"> {{element.Price}}  </td>
        </ng-container>

        <ng-container matColumnDef="Amount">
          <th mat-header-cell *matHeaderCellDef> Amount</th>
          <td mat-cell *matCellDef="let element"> {{element.Amount}} </td>
        </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns2"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns2;"></tr>
    </table> -->
   <!-- <h3 align="center">Funds Obliged: {{fundsObliged}} </h3> -->
   <!-- <h3 align="center"style="background-color:powderblue;">There is no shortage of funds</h3> -->
    <br>


                                                 <!-- Shares Section-->
      <mat-list class="list1" role="list" >
        <mat-list-item role="listitem"><h2>Shares:</h2></mat-list-item>
      </mat-list>
      <mat-slide-toggle class="toggle">Only Shortages</mat-slide-toggle>

      <table mat-table [dataSource]="obShares" class="mat-elevation-z8" style="padding-left:150px">
        <ng-container matColumnDef="Securities">
          <th mat-header-cell *matHeaderCellDef> Securities </th>
          <td mat-cell *matCellDef="let element"> {{element.securityName}} </td>
        </ng-container>
        <!-- Name Column -->
        <ng-container matColumnDef="Opening_Balance">
          <th mat-header-cell *matHeaderCellDef> Opening_Balance </th>
          <td mat-cell *matCellDef="let element"> {{element.openingShareBalance | number:'1.0-2':'en-US'}} </td>
        </ng-container>
        <!-- <ng-container matColumnDef="Closing_Balance">
          <th mat-header-cell *matHeaderCellDef> Closing_Balance </th>
          <td mat-cell *matCellDef="let element"> {{element.Closing_Balance}} </td>
        </ng-container> -->
      
        <ng-container matColumnDef="Shares_Obliged">
          <th mat-header-cell *matHeaderCellDef> Buy_Sell_Quantity </th>
          <td mat-cell *matCellDef="let element"> {{element.securityObligation | number:'1.0-2':'en-US'}} </td>
        </ng-container>
      
        <ng-container matColumnDef="Status">
          <th mat-header-cell *matHeaderCellDef> Status </th>
          <td mat-cell *matCellDef="let element">{{isLess(element.openingShareBalance,element.securityObligation)}} </td>
        </ng-container>
      
        <tr mat-header-row *matHeaderRowDef="displayedColumns1"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns1;"></tr>
      </table>
      
    </mat-tab>
    
    <mat-tab label="Cost of Settlement"> 
      <br>
      <div style="text-align: center;">
        <h2>Total Cost : ${{totalCost | number:'1.0-2':'en-US'}}</h2>
      </div>
      <mat-list class="list1" role="list">
        <mat-list-item role="listitem">
          <h2>Funds:</h2>
        </mat-list-item>
      </mat-list>
   


      <table>
        <tr>
          <td><h3>Funds to be borrowed: {{costOfSettlementFunds.fundsToBeBorrowed | number:'1.0-2':'en-US'}}</h3></td>
          <td><h3>Borrowing Rate: {{costOfSettlementFunds.borrowingRate | number:'1.0-2':'en-US'}}%</h3></td>
          <td><h3>Cost incurred: ${{costOfSettlementFunds.costIncurred | number:'1.0-2':'en-US'}}</h3></td>
        </tr>
      </table>
    

      <mat-list class="list1" role="list">
        <mat-list-item role="listitem">
          <h2>Shares:</h2>
        </mat-list-item>
      </mat-list>
      
      <table mat-table [dataSource]="dataSettlement" class="mat-elevation-z8">
        <ng-container matColumnDef="Securities">
          <th mat-header-cell *matHeaderCellDef> Securities </th>
          <td mat-cell *matCellDef="let element"> {{element.securities}} </td>
          <td mat-footer-cell *matFooterCellDef>Total</td>
        </ng-container>
        <ng-container matColumnDef="Shares">
          <th mat-header-cell *matHeaderCellDef> Shares </th>
          <td mat-cell *matCellDef="let element"> {{element.shares}} </td>
          <td mat-footer-cell *matFooterCellDef>  </td>
        </ng-container>
        <ng-container matColumnDef="Rate">
          <th mat-header-cell *matHeaderCellDef> Price per Share </th>
          <td mat-cell *matCellDef="let element"> {{element.pricePerShare | number:'1.0-2':'en-US'}} </td>
          <td mat-footer-cell *matFooterCellDef>  </td>
        </ng-container>
        <ng-container matColumnDef="Cost">
          <th mat-header-cell *matHeaderCellDef> Cost </th>
          <td mat-cell *matCellDef="let element"> {{element.cost | number:'1.0-2':'en-US'}} </td>
          <td mat-footer-cell *matFooterCellDef> {{getTotalCost() | number:'1.0-2':'en-US'}} </td>
        </ng-container>    
        <tr mat-header-row *matHeaderRowDef="displayedColumnsSettlement"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumnsSettlement;"></tr>
        <tr mat-footer-row *matFooterRowDef="displayedColumnsSettlement"></tr>
      </table>
    </mat-tab>
  
</mat-tab-group>

</body>
  