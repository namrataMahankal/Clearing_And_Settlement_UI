<body class='mat-app-background'>



<mat-toolbar [class.mat-elevation-z6]=true color="primary">
    
    <span>Clearing House</span>
    <!-- <span class="example-spacer"></span> -->
    <!-- <button mat-icon-button class="example-icon favorite-icon" aria-label="Example icon-button with heart icon">
      <mat-icon>favorite</mat-icon>
    </button> -->
</mat-toolbar>



<mat-tab-group mat-align-tabs="center">

    <mat-tab label="Trades"> 
        <!-- <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
            <ng-container matColumnDef="BuyerCM">
              <th mat-header-cell *matHeaderCellDef> Buyer CM </th>
              <td mat-cell *matCellDef="let element"> {{element.BuyerCM}} </td>
            </ng-container>
          
         
            <ng-container matColumnDef="SellerCM">
              <th mat-header-cell *matHeaderCellDef> Seller CM </th>
              <td mat-cell *matCellDef="let element"> {{element.SellerCM}} </td>
            </ng-container>
          
      
            <ng-container matColumnDef="ES">
              <th mat-header-cell *matHeaderCellDef> ES </th>
              <td mat-cell *matCellDef="let element"> {{element.ES}} </td>
            </ng-container>
          
          
            <ng-container matColumnDef="Qty">
              <th mat-header-cell *matHeaderCellDef> Quantity </th>
              <td mat-cell *matCellDef="let element"> {{element.Qty}} </td>
            </ng-container>
      
            <ng-container matColumnDef="Price">
              <th mat-header-cell *matHeaderCellDef> Price </th>
              <td mat-cell *matCellDef="let element"> {{element.Price}} </td>
            </ng-container>
      
            <ng-container matColumnDef="TradeValue">
              <th mat-header-cell *matHeaderCellDef> Trade Value </th>
              <td mat-cell *matCellDef="let element"> {{element.TradeValue}} </td>
            </ng-container>
          
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
          </table>  -->

          <br>
          
         <br>
          <!-- <div *ngFor="let car of sampleData">
            {{car.qty}} {{car.es}} {{car.buyerCM}}
          </div> -->

          <table mat-table [dataSource]="TradesDataSource" class="mat-elevation-z8">
            <ng-container matColumnDef="BuyerCM">
              <th mat-header-cell *matHeaderCellDef> Buyer CM </th>
              <td mat-cell *matCellDef="let element"> {{element.buyerCM}} </td>
            </ng-container>
          
            <!-- Name Column -->
            <ng-container matColumnDef="SellerCM">
              <th mat-header-cell *matHeaderCellDef> Seller CM </th>
              <td mat-cell *matCellDef="let element"> {{element.sellerCM}} </td>
            </ng-container>
          
            <!-- Weight Column -->
            <ng-container matColumnDef="ES">
              <th mat-header-cell *matHeaderCellDef> ES </th>
              <td mat-cell *matCellDef="let element"> {{element.eS}} </td>
            </ng-container>
          
            <!-- Symbol Column -->
            <ng-container matColumnDef="Qty">
              <th mat-header-cell *matHeaderCellDef> Quantity </th>
              <td mat-cell *matCellDef="let element"> {{element.qty | number:'1.0-2':'en-US'}} </td>
            </ng-container>
      
            <ng-container matColumnDef="Price">
              <th mat-header-cell *matHeaderCellDef> Price </th>
              <td mat-cell *matCellDef="let element"> {{element.price | number:'1.0-2':'en-US'}} </td>
            </ng-container>
      
            <ng-container matColumnDef="TradeValue">
              <th mat-header-cell *matHeaderCellDef> Trade Value </th>
              <td mat-cell *matCellDef="let element"> {{element.transactionAmt | number:'1.0-2':'en-US'}} </td>
            </ng-container>
          
            <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky:true"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
          </table>
          
    </mat-tab>

    <mat-tab label="Corporate Actions"> 

      <mat-accordion>
       <table class="corpactiontab">
        <mat-expansion-panel *ngFor="let CMElement of corpActionsSummary" (opened)="panelOpenState = true" (closed)="panelOpenState = false">
          <mat-expansion-panel-header>
            <mat-panel-title class="panelTitle">
              <tr>
                 <td>{{CMElement.securities}}: </td>
                 <td>{{CMElement.action}}</td>
                 <td> {{CMElement.parameter}}</td>
              </tr>
            </mat-panel-title>
            <mat-panel-description>
              Click to toggle report view
            </mat-panel-description>
          </mat-expansion-panel-header>
          <table mat-table [dataSource]="CMElement.cMList" class="mat-elevation-z8">
            <ng-container matColumnDef="CM">
              <th mat-header-cell *matHeaderCellDef> Clearing member </th>
              <td mat-cell *matCellDef="let element"> {{element.cm}} </td>
            </ng-container>
            <ng-container matColumnDef="Initial_shares">
              <th mat-header-cell *matHeaderCellDef> Initial shares </th>
              <td mat-cell *matCellDef="let element"> {{element.initialShares | number:'1.0-2':'en-US'}} </td>
            </ng-container>
            <ng-container matColumnDef="Current_shares">
              <th mat-header-cell *matHeaderCellDef> Current shares </th>
              <td mat-cell *matCellDef="let element"> {{element.currentShares | number:'1.0-2':'en-US'}} </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumnsCorpActions"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumnsCorpActions;"></tr>
          </table>
        </mat-expansion-panel>
      </table>
      </mat-accordion>
     
    </mat-tab>


    <mat-tab label="Obligation Report"> 
    <!-- Expansion Panel for Obligation Report -->
      <mat-accordion>
        <mat-expansion-panel *ngFor="let CMElement of OBReport" (opened)="panelOpenState = true" (closed)="panelOpenState = false">
          <mat-expansion-panel-header>
            <mat-panel-title>
              {{CMElement.cmname}}
            </mat-panel-title>
            <mat-panel-description>
              <!-- {{panelOpenState ? 'Hide' : 'Show'}} Report -->
              Click to toggle report view
            </mat-panel-description>
          </mat-expansion-panel-header>

          <h2> Funds Obligation Report </h2>
           <h3>Funds Obliged:{{CMElement.fundsObligation | number:'1.0-2':'en-US'}}</h3>
          <!-- <table mat-table [dataSource]="CMElement.Funds" class="mat-elevation-z8">
            <ng-container *ngFor="let FundsElement of obPanelFundsColumns"  matColumnDef={{FundsElement}}>
              <th mat-header-cell *matHeaderCellDef> {{FundsElement}} </th>
             
              <td mat-cell *matCellDef ="let element"> {{element[FundsElement]}} </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="obPanelFundsColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: obPanelFundsColumns;"></tr>
          </table> -->

          <br><br><br>
          <h2> Shares Obligation Report </h2>

          <table mat-table [dataSource]="CMElement.shareListObligation" class="mat-elevation-z8">
            <ng-container matColumnDef="Security">
                <th mat-header-cell *matHeaderCellDef> Security </th>
                <td mat-cell *matCellDef="let element"> {{element.securityName}} </td>
              </ng-container>
              <ng-container matColumnDef="Opening Balance">
                <th mat-header-cell *matHeaderCellDef> Opening share balance </th>
                <td mat-cell *matCellDef="let element"> {{element.openingShareBalance | number:'1.0-2':'en-US'}} </td>
              </ng-container>
              <ng-container matColumnDef="Security Obligation">
                <th mat-header-cell *matHeaderCellDef> Security obligation </th>
                <td mat-cell *matCellDef="let element"> {{element.securityObligation | number:'1.0-2':'en-US'}} </td>
              </ng-container>
              <ng-container matColumnDef="Status">
                <th mat-header-cell *matHeaderCellDef> Status </th>
                <td mat-cell *matCellDef="let element"> {{isLess(element.openingShareBalance,element.securityObligation) | number:'1.0-2':'en-US'}} </td>
              </ng-container>
            <tr mat-header-row *matHeaderRowDef="obPanelSharesColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: obPanelSharesColumns;"></tr>
          </table>

        </mat-expansion-panel>
      </mat-accordion>
    </mat-tab> 
    <!-- Ob Report tab end -->

    <mat-tab label="Obligation Matrix">
      <!-- Expansion Panel for Obligation Matrix -->
      <mat-accordion>

        <mat-expansion-panel (opened)="panelOpenState = true"
          (closed)="panelOpenState = false">
          <mat-expansion-panel-header>
            <mat-panel-title>
              Obligation Matrix for Funds
            </mat-panel-title>
            <mat-panel-description>
              <!-- {{panelOpenState ? 'Hide' : 'Show'}} Report -->
              Click to toggle view
            </mat-panel-description>
          </mat-expansion-panel-header>
          <table mat-table [dataSource]="obligationMatrixFundsData" class="mat-elevation-z8">
            <ng-container matColumnDef="CM">
                <th mat-header-cell *matHeaderCellDef> Clearing member </th>
                <td mat-cell *matCellDef="let element"> {{element.clearingMemberame}} </td>
              </ng-container>
              <ng-container matColumnDef="Net Fund">
                <th mat-header-cell *matHeaderCellDef> Funds obliged </th>
                <td mat-cell *matCellDef="let element"> {{element.fundObligation | number:'1.0-2':'en-US'}} </td>
              </ng-container>
            <tr mat-header-row *matHeaderRowDef="obligationMatrixFundsColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: obligationMatrixFundsColumns;"></tr>
          </table>
        </mat-expansion-panel>

        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
          <mat-expansion-panel-header>
            <mat-panel-title>
              Obligation Matrix for ES
            </mat-panel-title>
            <mat-panel-description>
              <!-- {{panelOpenState ? 'Hide' : 'Show'}} Report -->
              Click to toggle view
            </mat-panel-description>
          </mat-expansion-panel-header>
          <table mat-table [dataSource]="obMatrixData" class="mat-elevation-z8">
            <ng-container matColumnDef="CM">
                <th mat-header-cell *matHeaderCellDef> CM </th>
                <td mat-cell *matCellDef="let element"> {{element['CM']}} </td>
              </ng-container>
              <ng-container matColumnDef="1">
                <th mat-header-cell *matHeaderCellDef> AT&T inc </th>
                <td mat-cell *matCellDef="let element"> {{element['AT&T inc']}} </td>
              </ng-container>
              <ng-container matColumnDef="2">
                <th mat-header-cell *matHeaderCellDef> WALMART INC </th>
                <td mat-cell *matCellDef="let element"> {{element['WALMART INC']}} </td>
              </ng-container>
              <ng-container matColumnDef="3">
                <th mat-header-cell *matHeaderCellDef> TEXAS INSTRUMENTS INC </th>
                <td mat-cell *matCellDef="let element"> {{element['TEXAS INSTRUMENTS INC']}} </td>
              </ng-container>
              <ng-container matColumnDef="4">
                <th mat-header-cell *matHeaderCellDef> Anheuser Busch Inbev NV </th>
                <td mat-cell *matCellDef="let element"> {{element['Anheuser Busch Inbev NV']}} </td>
              </ng-container>
              <ng-container matColumnDef="5">
                <th mat-header-cell *matHeaderCellDef> Apple </th>
                <td mat-cell *matCellDef="let element"> {{element['Apple']}} </td>
              </ng-container>
              <ng-container matColumnDef="6">
                <th mat-header-cell *matHeaderCellDef>Alphabet Inc. </th>
                <td mat-cell *matCellDef="let element"> {{element['Alphabet Inc.']}} </td>
              </ng-container>
              <ng-container matColumnDef="7">
                <th mat-header-cell *matHeaderCellDef> Tesla Inc. </th>
                <td mat-cell *matCellDef="let element"> {{element['Tesla Inc.']}} </td>
              </ng-container>
              <ng-container matColumnDef="8">
                <th mat-header-cell *matHeaderCellDef> QUALCOMM Inc. </th>
                <td mat-cell *matCellDef="let element"> {{element['QUALCOMM Inc.']}} </td>
              </ng-container>
              <ng-container matColumnDef="9">
                <th mat-header-cell *matHeaderCellDef> Intercontinental Exchange </th>
                <td mat-cell *matCellDef="let element"> {{element['Intercontinental Exchange']}} </td>
              </ng-container>
              <ng-container matColumnDef="10">
                <th mat-header-cell *matHeaderCellDef> STARBUCKS CORP </th>
                <td mat-cell *matCellDef="let element"> {{element['STARBUCKS CORP']}} </td>
              </ng-container>
              <ng-container matColumnDef="11">
                <th mat-header-cell *matHeaderCellDef> NVIDIA Corporation </th>
                <td mat-cell *matCellDef="let element"> {{element['NVIDIA Corporation']}} </td>
              </ng-container>
              <ng-container matColumnDef="12">
                <th mat-header-cell *matHeaderCellDef> Microsoft </th>
                <td mat-cell *matCellDef="let element"> {{element['Microsoft']}} </td>
              </ng-container>
              <ng-container matColumnDef="13">
                <th mat-header-cell *matHeaderCellDef> Amazon </th>
                <td mat-cell *matCellDef="let element"> {{element['Amazon']}} </td>
              </ng-container>
              <ng-container matColumnDef="14">
                <th mat-header-cell *matHeaderCellDef> FORD Motor Company </th>
                <td mat-cell *matCellDef="let element"> {{element['FORD Motor Company']}} </td>
              </ng-container>
              <ng-container matColumnDef="15">
                <th mat-header-cell *matHeaderCellDef> UBER </th>
                <td mat-cell *matCellDef="let element"> {{element['UBER']}} </td>
              </ng-container>

            <tr mat-header-row *matHeaderRowDef="obCols"></tr>
            <tr mat-row *matRowDef="let row; columns: obCols;"></tr>
          </table>
        </mat-expansion-panel>

      </mat-accordion>
    </mat-tab>
    <!-- Ob Matrix tab end -->



    <mat-tab label="Cost of Settlement"> 

        <mat-accordion>
        <mat-expansion-panel *ngFor="let a of costData"  (opened)="panelOpenState = true" (closed)="panelOpenState = false">
            <mat-expansion-panel-header>
              <mat-panel-title>
                {{a.clearingMemberName}}
              </mat-panel-title>
              <mat-panel-description>
                <!-- {{panelOpenState ? 'Hide' : 'Show'}} Report -->
                Click to toggle view
              </mat-panel-description>
            </mat-expansion-panel-header>
            <div style="text-align: center;">
                <!-- <h2>Total Cost : ${{totalCost}}</h2> -->
              </div>
              <mat-list class="list1" role="list">
                <mat-list-item role="listitem">
                  <h2>Funds:</h2>
                </mat-list-item>
              </mat-list>
           
        
        
              <table>
                <tr>
                  <td><h3>Funds to be borrowed: {{a.costFunds.fundsToBeBorrowed | number:'1.0-2':'en-US'}}</h3></td>
                  <td><h3>Borrowing Rate: {{a.costFunds.borrowingRate | number:'1.0-2':'en-US'}}%</h3></td>
                  <td><h3>Cost incurred: ${{a.costFunds.costIncurred | number:'1.0-2':'en-US'}}</h3></td>
                </tr>
              </table>
            
        
              <mat-list class="list1" role="list">
                <mat-list-item role="listitem">
                  <h2>Shares:</h2>
                </mat-list-item>
              </mat-list>
        <!-- <p>{{a.costShares[0].securities}}</p> -->
        <table mat-table [dataSource]="a.costShares" class="mat-elevation-z8">
            <ng-container matColumnDef="Security">
                <th mat-header-cell *matHeaderCellDef> Security </th>
                <td mat-cell *matCellDef="let element"> {{element.securities}} </td>
              </ng-container>
              <ng-container matColumnDef="Shares">
                <th mat-header-cell *matHeaderCellDef> Shares </th>
                <td mat-cell *matCellDef="let element"> {{element.shares}} </td>
              </ng-container>
              <ng-container matColumnDef="Price Per Share">
                <th mat-header-cell *matHeaderCellDef> Price Per Share </th>
                <td mat-cell *matCellDef="let element"> {{element.pricePerShare | number:'1.0-2':'en-US'}} </td>
              </ng-container>
              <ng-container matColumnDef="Cost">
                <th mat-header-cell *matHeaderCellDef> Cost </th>
                <td mat-cell *matCellDef="let element"> {{element.cost | number:'1.0-2':'en-US'}} </td>
              </ng-container>
              <!-- <ng-container matColumnDef="Net Fund">
                <th mat-header-cell *matHeaderCellDef> Funds obliged </th>
                <td mat-cell *matCellDef="let element"> {{element.fundObligation}} </td>
              </ng-container> -->
            <tr mat-header-row *matHeaderRowDef="col"></tr>
            <tr mat-row *matRowDef="let row; columns: col;"></tr>
          </table>
          </mat-expansion-panel>
        </mat-accordion>
        <!-- <table mat-table [dataSource]="CostOfSettlementValueList" class="mat-elevation-z8">
            <ng-container matColumnDef="CM">
              <th mat-header-cell *matHeaderCellDef> Clearing Member</th>
              <td mat-cell *matCellDef="let element"> {{element.CM}} </td>
            </ng-container>
            <ng-container matColumnDef="Cost">
              <th mat-header-cell *matHeaderCellDef> Cost </th>
              <td mat-cell *matCellDef="let element"> {{element.Cost}} </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumnCost"></tr>
            <tr mat-row *matRowDef="let row; columns:displayedColumnCost;"></tr>        
        </table> -->



    </mat-tab>

</mat-tab-group>
</body>