<mat-toolbar [class.mat-elevation-z6]=true color="primary">
    
  <span>Clearing House</span>
  <!-- <span class="example-spacer"></span> -->
  <!-- <button mat-icon-button class="example-icon favorite-icon" aria-label="Example icon-button with heart icon">
    <mat-icon>favorite</mat-icon>
  </button> -->
</mat-toolbar>



<mat-tab-group mat-align-tabs="center">

  <mat-tab label="Trades"> 
      <!-- <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
          <ng-container matColumnDef="BuyerCM">
            <th mat-header-cell *matHeaderCellDef> Buyer CM </th>
            <td mat-cell *matCellDef="let element"> {{element.BuyerCM}} </td>
          </ng-container>
        
       
          <ng-container matColumnDef="SellerCM">
            <th mat-header-cell *matHeaderCellDef> Seller CM </th>
            <td mat-cell *matCellDef="let element"> {{element.SellerCM}} </td>
          </ng-container>
        
    
          <ng-container matColumnDef="ES">
            <th mat-header-cell *matHeaderCellDef> ES </th>
            <td mat-cell *matCellDef="let element"> {{element.ES}} </td>
          </ng-container>
        
        
          <ng-container matColumnDef="Qty">
            <th mat-header-cell *matHeaderCellDef> Quantity </th>
            <td mat-cell *matCellDef="let element"> {{element.Qty}} </td>
          </ng-container>
    
          <ng-container matColumnDef="Price">
            <th mat-header-cell *matHeaderCellDef> Price </th>
            <td mat-cell *matCellDef="let element"> {{element.Price}} </td>
          </ng-container>
    
          <ng-container matColumnDef="TradeValue">
            <th mat-header-cell *matHeaderCellDef> Trade Value </th>
            <td mat-cell *matCellDef="let element"> {{element.TradeValue}} </td>
          </ng-container>
        
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>  -->

        <br>
        
       <br>
        <!-- <div *ngFor="let car of sampleData">
          {{car.qty}} {{car.es}} {{car.buyerCM}}
        </div> -->

        <table mat-table [dataSource]="TradesDataSource" class="mat-elevation-z8">
          <ng-container matColumnDef="BuyerCM">
            <th mat-header-cell *matHeaderCellDef> Buyer CM </th>
            <td mat-cell *matCellDef="let element"> {{element.buyerCM}} </td>
          </ng-container>
        
          <!-- Name Column -->
          <ng-container matColumnDef="SellerCM">
            <th mat-header-cell *matHeaderCellDef> Seller CM </th>
            <td mat-cell *matCellDef="let element"> {{element.sellerCM}} </td>
          </ng-container>
        
          <!-- Weight Column -->
          <ng-container matColumnDef="ES">
            <th mat-header-cell *matHeaderCellDef> ES </th>
            <td mat-cell *matCellDef="let element"> {{element.es}} </td>
          </ng-container>
        
          <!-- Symbol Column -->
          <ng-container matColumnDef="Qty">
            <th mat-header-cell *matHeaderCellDef> Quantity </th>
            <td mat-cell *matCellDef="let element"> {{element.qty}} </td>
          </ng-container>
    
          <ng-container matColumnDef="Price">
            <th mat-header-cell *matHeaderCellDef> Price </th>
            <td mat-cell *matCellDef="let element"> {{element.price}} </td>
          </ng-container>
    
          <ng-container matColumnDef="TradeValue">
            <th mat-header-cell *matHeaderCellDef> Trade Value </th>
            <td mat-cell *matCellDef="let element"> {{element.transactionAmt}} </td>
          </ng-container>
        
          <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky:true"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
        
  </mat-tab>

  <mat-tab label="Corporate Actions"> 

    <mat-accordion>
     <table class="corpactiontab">
      <mat-expansion-panel *ngFor="let CMElement of corpActionsSummary" (opened)="panelOpenState = true" (closed)="panelOpenState = false">
        <mat-expansion-panel-header>
          <mat-panel-title class="panelTitle">
            <tr>
               <td>{{CMElement.securities}}: </td>
               <td>{{CMElement.action}}</td>
               <td> {{CMElement.parameter}}</td>
            </tr>
          </mat-panel-title>
          <mat-panel-description>
            Click to toggle report view
          </mat-panel-description>
        </mat-expansion-panel-header>
        <table mat-table [dataSource]="CMElement.cMList" class="mat-elevation-z8">
          <ng-container matColumnDef="CM">
            <th mat-header-cell *matHeaderCellDef> Security </th>
            <td mat-cell *matCellDef="let element"> {{element.cm}} </td>
          </ng-container>
          <ng-container matColumnDef="Initial_shares">
            <th mat-header-cell *matHeaderCellDef> Initial shares </th>
            <td mat-cell *matCellDef="let element"> {{element.initialShares}} </td>
          </ng-container>
          <ng-container matColumnDef="Current_shares">
            <th mat-header-cell *matHeaderCellDef> Current shares </th>
            <td mat-cell *matCellDef="let element"> {{element.currentShares}} </td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedColumnsCorpActions"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumnsCorpActions;"></tr>
        </table>
      </mat-expansion-panel>
    </table>
    </mat-accordion>
   
  </mat-tab>


  <mat-tab label="Obligation Report"> 
  <!-- Expansion Panel for Obligation Report -->
    <mat-accordion>
      <mat-expansion-panel *ngFor="let CMElement of OBReport" (opened)="panelOpenState = true" (closed)="panelOpenState = false">
        <mat-expansion-panel-header>
          <mat-panel-title>
            {{CMElement.cmname}}
          </mat-panel-title>
          <mat-panel-description>
            <!-- {{panelOpenState ? 'Hide' : 'Show'}} Report -->
            Click to toggle report view
          </mat-panel-description>
        </mat-expansion-panel-header>

        <h2> Funds Obligation Report </h2>
         <h3>Funds Obliged:{{CMElement.fundsObligation}}</h3>
        <!-- <table mat-table [dataSource]="CMElement.Funds" class="mat-elevation-z8">
          <ng-container *ngFor="let FundsElement of obPanelFundsColumns"  matColumnDef={{FundsElement}}>
            <th mat-header-cell *matHeaderCellDef> {{FundsElement}} </th>
           
            <td mat-cell *matCellDef ="let element"> {{element[FundsElement]}} </td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="obPanelFundsColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: obPanelFundsColumns;"></tr>
        </table> -->

        <br><br><br>
        <h2> Shares Obligation Report </h2>

        <table mat-table [dataSource]="CMElement.shareListObligation" class="mat-elevation-z8">
          <ng-container matColumnDef="Security">
              <th mat-header-cell *matHeaderCellDef> Security </th>
              <td mat-cell *matCellDef="let element"> {{element.securityName}} </td>
            </ng-container>
            <ng-container matColumnDef="Opening Balance">
              <th mat-header-cell *matHeaderCellDef> Opening share balance </th>
              <td mat-cell *matCellDef="let element"> {{element.openingShareBalance}} </td>
            </ng-container>
            <ng-container matColumnDef="Security Obligation">
              <th mat-header-cell *matHeaderCellDef> Security obligation </th>
              <td mat-cell *matCellDef="let element"> {{element.securityObligation}} </td>
            </ng-container>
            <ng-container matColumnDef="Status">
              <th mat-header-cell *matHeaderCellDef> Status </th>
              <td mat-cell *matCellDef="let element"> {{isLess(element.openingShareBalance,element.securityObligation)}} </td>
            </ng-container>
          <tr mat-header-row *matHeaderRowDef="obPanelSharesColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: obPanelSharesColumns;"></tr>
        </table>

      </mat-expansion-panel>
    </mat-accordion>
  </mat-tab> 
  <!-- Ob Report tab end -->

  <mat-tab label="Obligation Matrix">
    <!-- Expansion Panel for Obligation Matrix -->
    <mat-accordion>

      <mat-expansion-panel (opened)="panelOpenState = true"
        (closed)="panelOpenState = false">
        <mat-expansion-panel-header>
          <mat-panel-title>
            Obligation Matrix for Funds
          </mat-panel-title>
          <mat-panel-description>
            <!-- {{panelOpenState ? 'Hide' : 'Show'}} Report -->
            Click to toggle view
          </mat-panel-description>
        </mat-expansion-panel-header>
        <table mat-table [dataSource]="obligationMatrixFundsData" class="mat-elevation-z8">
          <ng-container matColumnDef="CM">
              <th mat-header-cell *matHeaderCellDef> Clearing member </th>
              <td mat-cell *matCellDef="let element"> {{element.clearingMemberame}} </td>
            </ng-container>
            <ng-container matColumnDef="Net Fund">
              <th mat-header-cell *matHeaderCellDef> Funds obliged </th>
              <td mat-cell *matCellDef="let element"> {{element.fundObligation}} </td>
            </ng-container>
          <tr mat-header-row *matHeaderRowDef="obligationMatrixFundsColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: obligationMatrixFundsColumns;"></tr>
        </table>
      </mat-expansion-panel>

      <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
        <mat-expansion-panel-header>
          <mat-panel-title>
            Obligation Matrix for ES
          </mat-panel-title>
          <mat-panel-description>
            <!-- {{panelOpenState ? 'Hide' : 'Show'}} Report -->
            Click to toggle view
          </mat-panel-description>
        </mat-expansion-panel-header>
        <table mat-table [dataSource]="obligationMatrixEsData" class="mat-elevation-z8">
          <ng-container *ngFor="let temp of obligationMatrixEsColumns" matColumnDef={{temp}}>
            <th mat-header-cell *matHeaderCellDef> {{temp}} </th>
            <td mat-cell *matCellDef="let element"> {{element[temp]}} </td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="obligationMatrixEsColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: obligationMatrixEsColumns;"></tr>
        </table>
      </mat-expansion-panel>

    </mat-accordion>
  </mat-tab>
  <!-- Ob Matrix tab end -->



  <mat-tab label="Cost of Settlement"> 
      <table mat-table [dataSource]="CostOfSettlementValueList" class="mat-elevation-z8">
          <ng-container matColumnDef="CM">
            <th mat-header-cell *matHeaderCellDef> Clearing Member</th>
            <td mat-cell *matCellDef="let element"> {{element.CM}} </td>
          </ng-container>
        
          <!-- Name Column -->
          <ng-container matColumnDef="Cost">
            <th mat-header-cell *matHeaderCellDef> Cost </th>
            <td mat-cell *matCellDef="let element"> {{element.Cost}} </td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedColumnCost"></tr>
          <tr mat-row *matRowDef="let row; columns:displayedColumnCost;"></tr>        
      </table>
  </mat-tab>

</mat-tab-group>